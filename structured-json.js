var StructuredJSON=function(e){"use strict";function t(e,t,r=[]){for(;e<=t;)r.push(e++);return r}const r=[...t(65,90),...t(97,122),...t(48,57),45,95,61],n=[...Array(43).fill(0),62,0,62,0,63,...t(52,61),0,0,0,64,0,0,0,...t(0,25),0,0,0,0,63,0,...t(26,51),0,0];const s="object"==typeof self?self:globalThis,c=Object.getPrototypeOf(Uint8Array),o=(e,t)=>{const r=(t,r)=>(e.set(r,t),t),o=a=>{if(e.has(a))return e.get(a);const[u,f,...i]=t[a];switch(u){case 0:case-1:return r(f,a);case 9:{const e=function(e){const t=e.charCodeAt.bind(e),r=e.length,s="="===e[r-2]?2:"="===e[r-1]?1:0;let c=e.length;const o=new Uint8Array((.75*c+.5|0)-s);for(var a=0,u=c-s&4294967292,f=0;f<u;f+=4)c=n[t(f)]<<18|n[t(f+1)]<<12|n[t(f+2)]<<6|n[t(f+3)],o[a++]=c>>16&255,o[a++]=c>>8&255,o[a++]=255&c;return 1===s&&(c=n[t(f)]<<10|n[t(f+1)]<<4|n[t(f+2)]>>2,o[a++]=c>>8&255,o[a++]=255&c),2===s&&(c=n[t(f)]<<2|n[t(f+1)]>>4,o[a++]=255&c),o}(o(f)).buffer;return r(e,a)}case 1:{const e=r([],a);for(const t of f)e.push(o(t));return e}case 2:{const e=r({},a);for(const[t,r]of f)e[o(t)]=o(r);return e}case 3:return r(new Date(f),a);case 4:{const{source:e,flags:t}=f;return r(new RegExp(e,t),a)}case 5:{const e=r(new Map,a);for(const[t,r]of f)e.set(o(t),o(r));return e}case 6:{const e=r(new Set,a);for(const t of f)e.add(o(t));return e}case 7:{const{name:e,message:t}=f;return r(new s[e](t),a)}case 8:return r(BigInt(f),a);case"BigInt":return r(Object(BigInt(f)),a)}if(Object.getPrototypeOf(s[u])===c){const e=o(f);return r(new s[u](e,...i),a)}return r(new s[u](f),a)};return o},a="",{toString:u}={},{keys:f}=Object,i=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const r=u.call(e).slice(8,-1);switch(r){case"Array":return[1,a];case"Object":return[2,a];case"Date":return[3,a];case"RegExp":return[4,a];case"Map":return[5,a];case"Set":return[6,a];case"ArrayBuffer":return[9,a]}return r.includes("Array")?[1,r]:r.includes("Error")?[7,r]:[2,r]},l=([e,t])=>0===e&&("function"===t||"symbol"===t),g=(e,t,n,s)=>{const c=(e,t)=>{const r=s.push(e)-1;return n.set(t,r),r},o=s=>{if(n.has(s))return n.get(s);let[a,u]=i(s);switch(a){case 0:{let t=s;switch(u){case"bigint":a=8,t=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return c([-1],s)}return c([a,t],s)}case 9:{const e=function(e){const t=e.length,n=new Uint8Array(Math.ceil(4*t/3));for(var s=-1,c=0;++s<t;){let t=e[s];const o=e[++s];n[c++]=r[t>>2],n[c++]=r[(3&t)<<4|o>>4],isNaN(o)?(n[c++]=r[64],n[c++]=r[64]):(t=e[++s],n[c++]=r[(15&o)<<2|t>>6],n[c++]=r[isNaN(t)?64:63&t])}const o=(new TextDecoder).decode(n);return o+(o.length%3==2?"=":o.length%3==1?"==":"")}(new Uint8Array(s));return c([a,o(e)],s)}case 1:{if(u){const e=[u,,s.byteOffset,s.byteLength/s.BYTES_PER_ELEMENT],t=c(e,s);return e[1]=o(s.buffer),t}const e=[],t=c([a,e],s);for(const t of s)e.push(o(t));return t}case 2:{if(u)switch(u){case"BigInt":return c([u,s.toString()],s);case"Boolean":case"Number":case"String":return c([u,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const r=[],n=c([a,r],s);for(const t of f(s))!e&&l(i(s[t]))||r.push([o(t),o(s[t])]);return n}case 3:return c([a,s.toISOString()],s);case 4:{const{source:e,flags:t}=s;return c([a,{source:e,flags:t}],s)}case 5:{const t=[],r=c([a,t],s);for(const[r,n]of s)(e||!l(i(r))&&!l(i(n)))&&t.push([o(r),o(n)]);return r}case 6:{const t=[],r=c([a,t],s);for(const r of s)!e&&l(i(r))||t.push(o(r));return r}}const{message:g}=s;return c([a,{name:u,message:g}],s)};return o},h=(e,{json:t,lossy:r}={})=>{const n=[];return g(!(t||r),!!t,new Map,n)(e),n};console.log(h(new Uint8Array([3,2,1])));
/*! (c) Andrea Giammarchi - ISC */
const{parse:y,stringify:w}=JSON,b={json:!0,lossy:!0};return e.parse=e=>{return t=y(e),o(new Map,t)(0);var t},e.stringify=e=>w(h(e,b)),e}({});
